<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üå∏ S·∫ÆC ƒê·∫∏P D√ÇN T·ªòC TH√ÅI üáπüá≠</title>
  
  <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAWlBMVEUAAADu8u7x8fHx8fHx8fHu8u7u8u7x8fHx8fHu8u7x8fHx8fHx8fHu8u7u8u7u8u7x8fHx8fHx8fEAAADw8vH///+JvNfNAAAACnRSTlMA6wL66gMBDQECdYk870MAAACPSURVDjLrdLnEkAwEIXh/d84y4J+p6p7oP9Z4t8kM5kIeF3/eG8wYdIe7yX6A6h39v2xO80h59f8JcO7lPj/d4zD9y32R8Y8c4w8/x8L+d5E+N/g453fD732Vw448/D8P3fX+w411D5/x/l93wJ/f/i5b9/p+D9V5o/9t9797YcAAAAAElFTkSuQmCC">
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

  <style>
    /* GI·ªÆ NGUY√äN CSS G·ªêC T·ª™ FILE C·ª¶A B·∫†N */
    :root { --primary-red: #8B0000; --secondary-gold: #FFD700; --text-color: #333; --white: #ffffff; --cream-bg: #fffaf0; }
    body { font-family: 'Nunito', sans-serif; margin: 0; background-attachment: fixed; background-size: cover; background-position: center; transition: background 0.5s ease; overflow-x: hidden; font-weight: 700; }
    
    /* HI·ªÜU ·ª®NG CHUY·ªÇN TRANG G·ªêC */
    .page-enter { opacity: 0; transform: translateY(20px); }
    .page-enter-active { opacity: 1; transform: translateY(0); transition: opacity 0.4s ease, transform 0.4s ease; }
    .page-exit-active { opacity: 0; transform: translateY(-20px); transition: opacity 0.3s ease, transform 0.3s ease; }

    header { text-align: center; padding: 60px 20px 40px; color: white; text-shadow: 2px 2px 10px rgba(0,0,0,0.8); }
    header h1 { font-size: 48px; margin: 0; font-weight: 900; letter-spacing: 2px; }

    nav { position: sticky; top: 15px; z-index: 1000; background: rgba(255, 255, 255, 0.85); margin: 0 20px; padding: 12px; border-radius: 50px; display: flex; justify-content: center; gap: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3); }
    nav a { text-decoration: none; color: var(--primary-red); padding: 12px 25px; border-radius: 30px; transition: all 0.3s ease; font-weight: 800; }
    nav a.active { background: var(--primary-red); color: white; box-shadow: 0 5px 15px rgba(139, 0, 0, 0.3); }

    /* LAYOUT CHIA C·ªòT CH·ªà CHO TRANG CH·ª¶ */
    .home-grid { display: grid; grid-template-columns: 1fr 320px; gap: 20px; }
    @media (max-width: 900px) { .home-grid { grid-template-columns: 1fr; } }

    /* SIDEBAR GHI CH√ö (V√ôNG KHOANH ƒê·ªé) */
    .sidebar-notes { background: white; padding: 25px; border-radius: 25px; border-left: 6px solid var(--primary-red); box-shadow: 0 10px 25px rgba(0,0,0,0.05); height: fit-content; }

    .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
    .section-content { background: rgba(255, 255, 255, 0.85); padding: 40px; border-radius: 40px; box-shadow: 0 20px 50px rgba(0,0,0,0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.5); }
    
    /* GI·ªÆ NGUY√äN CSS C√ÅC N√öT BLOG, FB C·ª¶A B·∫†N */
    .btn-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 30px; }
    .btn-custom { display: flex; align-items: center; gap: 10px; padding: 15px 30px; border-radius: 50px; text-decoration: none; font-weight: 800; transition: 0.3s; color: white; }
    .btn-blog { background: #ff4757; }
    .btn-fb { background: #2f3542; }
    .btn-map { background: #2ecc71; }
    .btn-custom:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }

    /* CSS CHO PH·∫¶N S·∫¢N PH·∫®M & MODAL M·ªöI */
    .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; }
    .product-card { background: white; border-radius: 25px; padding: 20px; text-align: center; transition: 0.4s; border: 1px solid #eee; cursor: pointer; }
    .product-card:hover { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
    .product-card img { width: 100%; border-radius: 20px; aspect-ratio: 1/1; object-fit: cover; }
    .btn-buy { background: var(--primary-red); color: white; border: none; padding: 12px; border-radius: 12px; width: 100%; font-weight: 800; cursor: pointer; margin-top: 15px; }

    .modal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 2000; padding: 20px; }
    .modal-content { background: white; padding: 30px; border-radius: 30px; width: 100%; max-width: 450px; position: relative; }
    input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 12px; font-family: inherit; box-sizing: border-box; }

    .zalo-float { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: #0088ff; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: white; font-size: 30px; z-index: 1500; animation: pulse 2s infinite; text-decoration: none; }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
    .hidden { display: none; }
  </style>
</head>
<body class="page-enter-active">

  <header>
    <h1 id="shop-name-title">S·∫ÆC ƒê·∫∏P D√ÇN T·ªòC TH√ÅI</h1>
    <p>B·∫£n s·∫Øc d√¢n t·ªôc Th√°i ‚úø ·∫®m th·ª±c ‚úø VƒÉn h√≥a</p>
  </header>

  <nav id="main-nav">
    <a href="#home" class="nav-link active">GI·ªöI THI·ªÜU</a>
    <a href="#products" class="nav-link">S·∫¢N PH·∫®M</a>
    <a href="#order-tracking" class="nav-link">THEO D√ïI ƒê∆†N</a>
  </nav>

  <div class="container">
    <section id="home">
      <div class="home-grid">
        <div class="section-content">
          <h2>V·ªÅ Ch√∫ng T√¥i</h2>
          <div id="intro-text">
            Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi n∆°i g√¨n gi·ªØ nh·ªØng gi√° tr·ªã vƒÉn h√≥a v√† ƒë·∫∑c s·∫£n truy·ªÅn th·ªëng c·ªßa ng∆∞·ªùi Th√°i...
          </div>
          
          <div class="btn-container">
            <a href="https://sacdepthaiblog.blogspot.com/" target="_blank" class="btn-custom btn-blog"><i class="fas fa-rss"></i> BLOG TH√ÅI</a>
            <a href="https://www.facebook.com/profile.php?id=61565538131333" target="_blank" class="btn-custom btn-fb"><i class="fab fa-facebook"></i> FACEBOOK</a>
            <a href="https://maps.app.goo.gl/YourMapLink" target="_blank" class="btn-custom btn-map"><i class="fas fa-map-marker-alt"></i> B·∫¢N ƒê·ªí</a>
          </div>
        </div>

        <aside class="sidebar-notes">
          <h3 style="color: var(--primary-red); margin-top: 0;"><i class="fas fa-edit"></i> Ghi ch√∫ Shop</h3>
          <p id="config-sidebar-text">‚Ä¢ Ship COD to√†n qu·ªëc nhanh ch√≥ng.<br>‚Ä¢ Cam k·∫øt s·∫£n ph·∫©m ch√≠nh g·ªëc.<br>‚Ä¢ Hotline: 09xx.xxx.xxx</p>
          <hr>
          <p><b>Gi·ªù l√†m vi·ªác:</b> 08:00 - 22:00</p>
        </aside>
      </div>
    </section>

    <section id="products" class="hidden">
      <div class="section-content">
        <h2 style="text-align: center; color: var(--primary-red);">S·∫£n Ph·∫©m ƒê·∫∑c S·∫£n</h2>
        <div class="product-grid" id="product-list"></div>
      </div>
    </section>

    <section id="order-tracking" class="hidden">
      <div class="section-content" style="max-width: 600px; margin: 0 auto;">
        <h2>Tra c·ª©u ƒë∆°n h√†ng</h2>
        <input type="text" id="track-input" placeholder="Nh·∫≠p m√£ ƒë∆°n (VD: SDT8899)">
        <button class="btn-buy" onclick="trackOrder()">KI·ªÇM TRA NGAY</button>
        <div id="track-result" style="margin-top:20px"></div>
      </div>
    </section>
  </div>

  <div class="modal" id="order-modal">
    <div class="modal-content">
      <h3 id="modal-p-title" style="margin-top:0">ƒê·∫∂T H√ÄNG</h3>
      <div id="order-step-1">
        <input type="text" id="cust-name" placeholder="H·ªç t√™n c·ªßa b·∫°n">
        <input type="tel" id="cust-phone" placeholder="S·ªë ƒëi·ªán tho·∫°i">
        <textarea id="cust-addr" placeholder="ƒê·ªãa ch·ªâ giao h√†ng"></textarea>
        <button class="btn-buy" onclick="showQRStep()">TI·∫æP T·ª§C: THANH TO√ÅN C·ªåC</button>
      </div>
      <div id="order-step-2" class="hidden">
        <div style="text-align:center; background:#f9f9f9; padding:15px; border-radius:15px;">
          <p>C·ªçc 50%: <b id="deposit-val" style="color:red"></b></p>
          <img id="qr-img" src="" style="width:200px; height:200px;">
          <p>N·ªôi dung: <b id="order-memo" style="background:yellow"></b></p>
        </div>
        <button class="btn-buy" style="background:#0088ff" onclick="confirmOrder()">X√ÅC NH·∫¨N & G·ª¨I ZALO</button>
      </div>
      <button onclick="closeModal()" style="background:none; border:none; color:#999; cursor:pointer; width:100%; margin-top:10px">ƒê√≥ng</button>
    </div>
  </div>

  <a href="#" id="zalo-link" class="zalo-float" target="_blank"><i class="fab fa-whatsapp"></i></a>

  <script>
    const CONFIG_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR0FQlaE-0xia0mxdQJiX0QL1QDqqYSu1MketjyqBT1tQcNdUUlW50H0gyH5c7DLrcYuN3aSvOXVYpI/pub?output=tsv';
    const TRACK_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vR_gk_A5DJadG6T99oSR5jQ-sN_XGI7UOVMuWK6aDvSTQUggUY10QzcWjYsW-RpiMuhSqsLr1x4pW_y/pub?output=tsv';
    const BRAIN_URL = 'https://script.google.com/macros/s/AKfycbx7qswsd2VdAPzQvy1ljB9s-N2W37gjbbRNhwIgjIn3unBgUBVVIQt4pQDhF9SgnoLR/exec';

    let products = [];
    let config = {};
    let selectedP = null;
    let currentOrderId = "";

    // üå™Ô∏è GI·ªÆ NGUY√äN LOGIC CHUY·ªÇN TRANG FADE-IN/OUT C·ª¶A B·∫†N
    const navLinks = document.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const targetId = this.getAttribute('href').substring(1);
        
        document.body.classList.remove('page-enter-active');
        document.body.classList.add('page-exit-active');

        setTimeout(() => {
          document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
          document.getElementById(targetId).classList.remove('hidden');
          navLinks.forEach(l => l.classList.remove('active'));
          this.classList.add('active');
          
          document.body.classList.remove('page-exit-active');
          document.body.classList.add('page-enter-active');
          window.scrollTo(0,0);
        }, 320);
      });
    });

    // T·∫¢I D·ªÆ LI·ªÜU
    async function init() {
      const resp = await fetch(CONFIG_URL);
      const text = await resp.text();
      const data = Papa.parse(text, {header:true, delimiter:'\t'}).data;
      config = data[0];
      products = data.slice(1);

      document.body.style.backgroundImage = `url('${config.background_img}')`;
      document.getElementById('zalo-link').href = `https://zalo.me/${config.zalo_phone}`;
      
      const list = document.getElementById('product-list');
      list.innerHTML = products.map(p => `
        <div class="product-card" onclick="openOrder('${p.id}')">
          <img src="${p.img}">
          <h3 style="margin:10px 0">${p.title}</h3>
          <p style="color:var(--primary-red); font-size:18px">${parseInt(p.price).toLocaleString()}ƒë</p>
          <button class="btn-buy">MUA NGAY</button>
        </div>
      `).join('');
    }

    // LU·ªíNG MUA H√ÄNG & QR
    function openOrder(id) {
      selectedP = products.find(p => p.id === id);
      document.getElementById('modal-p-title').innerText = selectedP.title;
      document.getElementById('order-modal').style.display = 'flex';
      document.getElementById('order-step-1').classList.remove('hidden');
      document.getElementById('order-step-2').classList.add('hidden');
    }

    function showQRStep() {
      const name = document.getElementById('cust-name').value;
      if(!name) return alert("Vui l√≤ng ƒëi·ªÅn t√™n");
      currentOrderId = "SDT" + Math.floor(1000 + Math.random() * 9000);
      const deposit = Math.round(selectedP.price * 0.5);
      const memo = `${currentOrderId} ${name.normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/\s/g,'')}`;
      
      const qrUrl = `https://img.vietqr.io/image/${config.bank_id}-${config.bank_account}-compact2.png?amount=${deposit}&addInfo=${encodeURIComponent(memo)}&accountName=${encodeURIComponent(config.bank_name)}`;
      
      document.getElementById('qr-img').src = qrUrl;
      document.getElementById('deposit-val').innerText = deposit.toLocaleString() + "ƒë";
      document.getElementById('order-memo').innerText = memo;
      document.getElementById('order-step-1').classList.add('hidden');
      document.getElementById('order-step-2').classList.remove('hidden');
    }

    async function confirmOrder() {
      const payload = {
        orderId: currentOrderId,
        custName: document.getElementById('cust-name').value,
        custPhone: document.getElementById('cust-phone').value,
        address: document.getElementById('cust-addr').value,
        product: selectedP.title
      };

      // G·ª¨I B·ªò N√ÉO
      fetch(BRAIN_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(payload) });

      // M·ªû ZALO
      const msg = `ƒê∆†N H√ÄNG: ${currentOrderId}\nKh√°ch: ${payload.custName}\nS·∫£n ph·∫©m: ${selectedP.title}\nƒê√£ c·ªçc 50%.`;
      window.open(`https://zalo.me/${config.zalo_phone}?text=${encodeURIComponent(msg)}`, '_blank');
      
      closeModal();
      alert("ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c l∆∞u!");
    }

    function closeModal() { document.getElementById('order-modal').style.display = 'none'; }

    async function trackOrder() {
      const id = document.getElementById('track-input').value.toUpperCase();
      const resp = await fetch(TRACK_URL);
      const text = await resp.text();
      const data = Papa.parse(text, {header:true, delimiter:'\t'}).data;
      const found = data.find(o => o.order_id === id);
      const res = document.getElementById('track-result');
      if(found) {
        res.innerHTML = `<div class="sidebar-notes" style="border-color:green">
          <p><b>Tr·∫°ng th√°i:</b> ${found.status}</p>
          <p><b>Ti·∫øn ƒë·ªô:</b> ${found.progress}</p>
        </div>`;
      } else res.innerHTML = "Kh√¥ng t√¨m th·∫•y m√£ ƒë∆°n.";
    }

    init();
  </script>
</body>
</html>
