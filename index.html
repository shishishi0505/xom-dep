<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veo 3 Prompt Tool Pro - Nh√¢n V·∫≠t Th√¥ng Minh</title>
    <style>
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); color: #fff; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        h1, h2 { text-align: center; }
        .section { background: rgba(255,255,255,0.15); padding: 20px; margin: 20px 0; border-radius: 10px; }
        label { display: block; margin: 10px 0 5px; font-weight: bold; }
        input, textarea, select { width: 100%; padding: 10px; border: none; border-radius: 5px; margin-bottom: 15px; font-size: 16px; }
        button { background: #ff6b6b; color: white; padding: 12px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        button:hover { background: #ff5252; }
        .char-list { display: flex; flex-wrap: wrap; gap: 15px; margin-bottom: 20px; }
        .char-card { background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; width: 200px; text-align: center; }
        .char-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 10px; }
        .char-card button { background: #4caf50; font-size: 12px; padding: 8px; }
        .output { background: #fff; color: #333; padding: 15px; border-radius: 5px; min-height: 100px; white-space: pre-wrap; margin-top: 20px; }
        .copy-btn { background: #4caf50; }
        .small-btn { font-size: 12px; padding: 6px 10px; }
        footer { text-align: center; margin-top: 40px; opacity: 0.8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Veo 3 Prompt Tool Pro</h1>
        <p style="text-align:center;">H·ªó tr·ª£ nhi·ªÅu nh√¢n v·∫≠t ‚Ä¢ Upload ·∫£nh ‚Ä¢ AI ph√¢n t√≠ch t·ª± ƒë·ªông</p>

        <!-- Ph·∫ßn 1: Qu·∫£n l√Ω nh√¢n v·∫≠t -->
        <div class="section">
            <h2>1. Th∆∞ Vi·ªán Nh√¢n V·∫≠t</h2>
            <div id="characterList" class="char-list"></div>

            <h3>Th√™m Nh√¢n V·∫≠t M·ªõi</h3>
            <label>T√™n nh√¢n v·∫≠t (v√≠ d·ª•: C√¥ g√°i √°o d√†i, Ninja c·∫≠u b√©...)</label>
            <input type="text" id="newCharName" placeholder="T√™n nh√¢n v·∫≠t">

            <label>Upload ·∫£nh nh√¢n v·∫≠t (ho·∫∑c d√°n link ·∫£nh b√™n d∆∞·ªõi)</label>
            <input type="file" id="charImage" accept="image/*">

            <label>Ho·∫∑c d√°n link ·∫£nh (URL)</label>
            <input type="text" id="charImageUrl" placeholder="https://example.com/image.jpg">

            <label>M√¥ t·∫£ th√™m c·ªßa b·∫°n (t√πy ch·ªçn - v√≠ d·ª•: c∆∞·ªùi d·ªãu d√†ng, c·∫ßm √¥...)</label>
            <textarea id="userDesc" rows="2" placeholder="Th√™m chi ti·∫øt b·∫°n mu·ªën nh·∫•n m·∫°nh..."></textarea>

            <button onclick="addOrUpdateCharacter()">‚ûï Th√™m / C·∫≠p Nh·∫≠t Nh√¢n V·∫≠t</button>
            <button onclick="analyzeImage()" class="small-btn">üîç Ph√¢n t√≠ch ·∫£nh b·∫±ng AI (m√¥ ph·ªèng)</button>

            <div class="output" id="analysisOutput"></div>
        </div>

        <!-- Ph·∫ßn 2: T·∫°o Prompt Video -->
        <div class="section">
            <h2>2. T·∫°o Prompt Video</h2>
            <label>Ch·ªçn nh√¢n v·∫≠t t·ª´ th∆∞ vi·ªán:</label>
            <select id="selectedCharacter" onchange="loadCharacterToVideo()">
                <option value="">-- Ch·ªçn nh√¢n v·∫≠t --</option>
            </select>

            <label>Character Sheet (t·ª± ƒë·ªông ƒëi·ªÅn khi ch·ªçn nh√¢n v·∫≠t)</label>
            <textarea id="fixedCharacter" rows="6" readonly></textarea>

            <label>H√†nh ƒë·ªông</label>
            <input type="text" id="action" placeholder="nh·∫£y m√∫a, ch·∫°y trong m∆∞a, bay l∆∞·ª£n...">

            <label>C·∫£nh quan & kh√¥ng kh√≠</label>
            <textarea id="scene" rows="3" placeholder="v∆∞·ªùn hoa anh ƒë√†o, ph·ªë c·ªï H√† N·ªôi ƒë√™m..."></textarea>

            <label>Th·ªùi l∆∞·ª£ng (gi√¢y)</label>
            <input type="text" id="duration" value="8">

            <label>√Çm thanh (t√πy ch·ªçn)</label>
            <input type="text" id="audio" placeholder="nh·∫°c n·ªÅn vui t∆∞∆°i, ti·∫øng m∆∞a r∆°i">

            <button onclick="generateVideoPrompt()">üé• T·∫°o Prompt Video Ho√†n Ch·ªânh</button>

            <div class="output" id="videoOutput"></div>
            <button class="copy-btn" onclick="copyToClipboard('videoOutput')">Copy Prompt</button>
        </div>

        <footer>Veo 3 Prompt Tool Pro ‚Ä¢ D√πng ·∫£nh + m√¥ t·∫£ ƒë·ªÉ nh√¢n v·∫≠t si√™u gi·ªëng!</footer>
   –æ—Ö</div>

    <script>
        let characters = JSON.parse(localStorage.getItem('veoCharacters')) || [];

        function saveCharacters() {
            localStorage.setItem('veoCharacters', JSON.stringify(characters));
            renderCharacterList();
            updateCharacterSelect();
        }

        function renderCharacterList() {
            const list = document.getElementById('characterList');
            list.innerHTML = '';
            characters.forEach((char, index) => {
                const card = document.createElement('div');
                card.className = 'char-card';
                card.innerHTML = `
                    <img src="${char.image}" alt="${char.name}">
                    <strong>${char.name}</strong>
                    <p>${char.sheet.substring(0, 60)}...</p>
                    <button onclick="selectCharacter(${index})">Ch·ªçn</button>
                    <button onclick="deleteCharacter(${index})" style="background:#f44336;">X√≥a</button>
                `;
                list.appendChild(card);
            });
        }

        function updateCharacterSelect() {
            const select = document.getElementById('selectedCharacter');
            select.innerHTML = '<option value="">-- Ch·ªçn nh√¢n v·∫≠t --</option>';
            characters.forEach((char, i) => {
                const opt = document.createElement('option');
                opt.value = i;
                opt.textContent = char.name;
                select.appendChild(opt);
            });
        }

        function addOrUpdateCharacter() {
            const name = document.getElementById('newCharName').value.trim();
            const userDesc = document.getElementById('userDesc').value.trim();
            if (!name) return alert("Vui l√≤ng nh·∫≠p t√™n nh√¢n v·∫≠t!");

            const imageInput = document.getElementById('charImage');
            const imageUrl = document.getElementById('charImageUrl').value.trim();
            let imageSrc = "https://via.placeholder.com/300x400?text=No+Image";

            if (imageInput.files && imageInput.files[0]) {
                imageSrc = URL.createObjectURL(imageInput.files[0]);
            } else if (imageUrl) {
                imageSrc = imageUrl;
            }

            // M√¥ ph·ªèng AI ph√¢n t√≠ch ·∫£nh + k·∫øt h·ª£p m√¥ t·∫£ ng∆∞·ªùi d√πng
            const aiAnalysis = analyzeImageMock(imageSrc); // H√†m m√¥ ph·ªèng AI
            const fullDesc = aiAnalysis + (userDesc ? " " + userDesc : "");

            const sheet = `Character: ${name} - ${fullDesc}. Keep exact same face, body proportions, hairstyle, clothing, and appearance across all scenes.`;

            characters.push({ name, image: imageSrc, sheet, fullDesc });
            saveCharacters();

            // Reset form
            document.getElementById('newCharName').value = '';
            document.getElementById('userDesc').value = '';
            document.getElementById('charImage').value = '';
            document.getElementById('charImageUrl').value = '';
            document.getElementById('analysisOutput').textContent = "ƒê√£ th√™m nh√¢n v·∫≠t th√†nh c√¥ng!\n" + sheet;
        }

        // M√¥ ph·ªèng AI ph√¢n t√≠ch ·∫£nh (b·∫°n c√≥ th·ªÉ thay b·∫±ng API th·∫≠t sau n√†y)
        function analyzeImageMock(imageSrc) {
            // Trong th·ª±c t·∫ø c√≥ th·ªÉ g·ªçi API nh∆∞ Google Vision, nh∆∞ng hi·ªán t·∫°i m√¥ ph·ªèng
            return "A young East Asian woman in her early 20s, long straight black hair with bangs, fair skin, big bright eyes, gentle smile, slim build, wearing traditional white Vietnamese √°o d√†i with delicate embroidery, elegant posture";
        }

        function analyzeImage() {
            const imageInput = document.getElementById('charImage');
            const imageUrl = document.getElementById('charImageUrl').value.trim();
            let src = imageUrl || (imageInput.files[0] ? URL.createObjectURL(imageInput.files[0]) : null);
            if (!src) return alert("Vui l√≤ng upload ho·∫∑c d√°n link ·∫£nh!");
            const result = analyzeImageMock(src);
            document.getElementById('analysisOutput').textContent = "K·∫øt qu·∫£ AI ph√¢n t√≠ch:\n" + result;
        }

        function selectCharacter(index) {
            document.getElementById('selectedCharacter').value = index;
            loadCharacterToVideo();
        }

        function loadCharacterToVideo() {
            const idx = document.getElementById('selectedCharacter').value;
            if (idx === "") {
                document.getElementById('fixedCharacter').value = "";
                return;
            }
            document.getElementById('fixedCharacter').value = characters[idx].sheet;
        }

        function deleteCharacter(index) {
            if (confirm("X√≥a nh√¢n v·∫≠t n√†y?")) {
                characters.splice(index, 1);
                saveCharacters();
            }
        }

        function generateVideoPrompt() {
            const sheet = document.getElementById('fixedCharacter').value.trim();
            if (!sheet) return alert("Vui l√≤ng ch·ªçn nh√¢n v·∫≠t tr∆∞·ªõc!");

            const action = document.getElementById('action').value.trim() || "standing gracefully";
            const scene = document.getElementById('scene').value.trim() || "beautiful natural environment";
            const duration = document.getElementById('duration').value || "8";
            const audio = document.getElementById('audio').value.trim() || "ambient sounds";

            const prompt = `${sheet}

The character is ${action} in a detailed ${scene}, with smooth, natural, realistic movements and physics.

Break down:
(0-2s) Slow introduction of character and scene.
(2-${parseInt(duration)-2}s) Main action with fluid motion.
(${parseInt(duration)-2}-${duration}s) Gentle conclusion.

Vertical video 720x1280, 9:16 aspect ratio, ${duration} seconds, high quality realistic style.
Audio: Native generated ${audio}, synced perfectly with movements.`;

            document.getElementById('videoOutput').textContent = prompt;
        }

        function copyToClipboard(id) {
            const text = document.getElementById(id).textContent;
            navigator.clipboard.writeText(text).then(() => alert("ƒê√£ copy!"));
        }

        // Kh·ªüi ƒë·ªông
        renderCharacterList();
        updateCharacterSelect();
    </script>
</body>
</html>
